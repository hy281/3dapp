<!DOCTYPE html>

<html lang="en">
    <head>
        
  <title>Texture Selection - HY821</title>
  
  <!-- Required tags -->  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
<!-- using cdn no compiled to avoid file clogging and gaining versitility, but sacrificing speed-->  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
 <!--declaring fonts , the coca cola font is inside the assets/fonts folder--> 
  <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
  <!--declaring own font from google fonts-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../lab1/assets/css/styles.css">

  <script src="https://x3dom.org/download/1.7/x3dom.js"></script>
  <script src="//d3js.org/d3.v4.0.0-alpha.28.min.js"></script>

  <link rel="stylesheet" href="https://x3dom.org/download/1.7/x3dom.css">

<style>
  .navbar-brand {
        color: black;
        transition: all 0.2s linear;
    }
    .navbar-brand:hover
    {
        color: white;
    } 
    .nav-link {
        color: black;
        transition: all 0.2s linear;
    }
    .nav-link:hover
    {
        color: white;
    } 
    .texture-button {
      cursor: pointer;
      max-width: 260px;
      max-height: 45px;
    }
    
    x3d{
      height: 350px;
    }
    .texture-button {
      max-width: 100%;
      height: auto;
    }
    .texture-item {
      flex: 1 1 30%;
      display: flex;
      justify-content:  center;
      align-items: center;
      margin-bottom: 10px; 
    }
    .texture-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      gap: 10px;
    }
</style>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid" style="background-color:red">
              
                <div class="logo">
                  <a class="navbar-brand" href="index.html">
                  <h1>1</h1>
                  <h1>oca</h1>
                  <h2>Cola</h2>
                  <h3>Journey</h3>
                  <p>Refreshing the world, one story at a time</p>
                  </a>
                  </div>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!-- Navigation bar deployable menu -->
                  <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="vrmltox3d.html">VRML97 to X3D</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="museum.html">Coca Cola Museum</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="Textures.html">Texturization</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="explorer.html">Model explorer</a>
                  </li>
                </ul>
                <span class="nav-link" href="#">
                  Contact
                </span>
              </div>
            </div>
          </nav>

          <!--padding after the navmenu-->
          <div class="container main_contents">

 <!--///////////////////////////////////////////////////////////////////////////////-->




 <div class="container">
  <div class="row">
      <!-- Left Section -->
      <div class="col-md-8">
          <div class="card mb-4">
              <div class="card-header">
                  <ul class="nav nav-tabs card-header-tabs">
                      <li class="nav-item">
                          <a class="nav-link active" href="#">X3D Models Texture Selection</a>
                      </li>
                  </ul>
              </div>
              <div class="card-body"  style="min-height: 35rem;">
                  
                  <div class="mb-3">
                      <button class="btn btn-success btn-sm" onclick="showModel('assets/X3D/can.x3d');changegallerytextures1()">Can of Soda</button>
                      <button class="btn btn-success btn-sm" onclick="showModel('assets/X3D/bottlecap.x3d');changegallerytextures2()"> Cap of Bottle</button>
                      <button class="btn btn-success btn-sm" onclick="showModel('assets/X3D/plasticbottle.x3d');changegallerytextures3()">Plastic Bottle</button>
                  </div>

                  <h4 class="card-title">Coca Cola X3D Model</h4>
  
                      <div class="row">
                        <!--CAN X3D-->
                        <div id="model-container">
                        <x3d >
                          <scene id="x3dScene">
                            <inline id="x3dModel" nameSpaceName="model" url="assets/X3D/can.x3d"></inline>
                          </scene>
                        </x3d>
                      </div>

                        <!--CAN X3D-->
                      </div>
                      <row>
                        <p class="card-text">
                          
                      </p>
                        <p class="card-text">
                          This X3D model of the coke can has been created in 3ds Max, UV mapped and exported to blender for a correct production of the x3d file including the mapping of the textures, X3D for display online.
                      </p>
                      <p class="card-text">
                        The model supports manipulation and zoom in and out, the scene was modified to be black so we can better observe model.
                    </p>
                      </row>
                  
              </div>
          </div>
      </div>
      <!-- Right Section -->

      <div class="col-md-4">
          <div class="card">
              <div class="card-header">
                  <ul class="nav nav-tabs card-header-tabs">
                      <li class="nav-item">
                          <a class="nav-link active" href="#">Gallery</a>
                      </li>
                  </ul>
              </div>
              <div class="card-body">
                <h4 class="card-title">Select the new texture</h4>
                  <div id="texture-container" class="texture-container">
                      <div class="texture-item">
                          <img src="assets/images/coca_cola.jpg"  class = "texture-button" onclick="changeTexturecan('canwrap/COKE.jpeg', 'can_texture_id_node')" alt="texture 1">
                      </div>
                      <div class="texture-item">
                          <img src="assets/images/fanta.jpeg" class = "texture-button" onclick="changeTexturecan('canwrap/Fanta.jpg', 'can_texture_id_node')" alt="texture 1">
                      </div>
                      <div class="texture-item">
                        <img src="assets/images/sprite.jpg" class = "texture-button" onclick="changeTexturecan('canwrap/sprite.jpg', 'can_texture_id_node')" alt="texture 1">
                    </div>
                    <div class="texture-item">
                      <img src="assets/images/dr_pepper.jpg" class = "texture-button" onclick="changeTexturecan('canwrap/DRPEPPER.jpg', 'can_texture_id_node')" alt="texture 1">
                  </div>
                      

                  </div>
                  <p class="card-text">
                      You should consider rendering your 3D Image Gallery objects in 3ds Max 2017 with Mental Ray.
                  </p>
              </div>
          </div>
      </div>
  </div>
</div>
 
 <!--///////////////////////////////////////////////////////////////////////////////-->

</div>

          <!---footer, socials and additional info-->
          
          <nav class="navbar fixed-bottom navbar-expand-sm bg-dark navbar-dark footer">
            <div class="container-fluid">
              <div class="navbar-text float-left copyright">
                <p><span class="align-baseline"></span>&copy Mobile Web 3D Applications </span></p>
              </div>
              <div class="footerInfo">
                <ul>
                  <li class="navbar-text">
                    <p>2023-2024 - 920G5 Sussex University</p>
                  </li>            
                  <li class="navbar-text">
                    <p>Hongyu Yan - Mr 305</p>
                  </li>
                </ul>
              </div>
              
              <div class="navbar-text float-right social">
                <a href="#"><i class="fab fa-github-square fa-2x" style="font-size: 50px;color: black;"></i></a>
                <a href="#"><i class="fab fa-google-plus-square fa-2x" style="font-size: 50px;color: red;"></i></a>
                <a href="#"><i class="fab fa-twitter-square fa-2x" style="font-size: 50px;color: aqua;"></i></a>
                <a href="#"><i class="fab fa-facebook-square fa-2x" style="font-size: 50px;color: blue;"></i></a>
              </div>
            </div>
          </nav>

          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

          

          <script>
                    
            const textureFiles =[
            'assets/images/textures/canwrap/COKE.jpeg',
            'assets/images/textures/canwrap/DRPEPPER.jpg',
            'assets/images/textures/canwrap/Fanta.jpg',
            'assets/images/textures/canwrap/sprite.jpg',
            'assets/images/textures/caps/coca_cola_cap.jpg',
            'assets/images/textures/caps/fanta_cap.jpg',
            'assets/images/textures/caps/dr_pepper_cap.jpg',
            'assets/images/textures/caps/7up_cap.jpg',
            'assets/images/textures/labelwrap/cokelabel.jpg',
            'assets/images/textures/labelwrap/drpepperlabel.jpg',
            'assets/images/textures/labelwrap/spritelabel.jpg',
            'assets/images/textures/labelwrap/fantalabel.jpg' ];

        function preloadTextures(urls) {
            return Promise.all(urls.map(url => {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.src = url;
                    img.onload = () => resolve(url);
                    img.onerror = () => reject(url);
                });
            }));
        }

        preloadTextures(textureFiles).then(() => {
            console.log("All textures are preloaded and ready to use.");
        }).catch((error) => {
            console.error("Error preloading textures:", error);
        });

       


            function changeTexturecan(newTextureUrl, texturenodename) {
                // Add the image path to a var
                var newTexture = "../images/textures/" + newTextureUrl;
                console.log("Changing texture to: " + newTexture);
    
                // Find the ImageTexture node
                const internalnodeid1 = `model__${texturenodename}`;
                const internalnode1 = document.getElementById(internalnodeid1);

                if (internalnode1){
                  //read the attribute
                  var currentTexturecan= internalnode1.getAttribute('url');
                  console.log("Current texture URL: " + currentTexturecan);
                  //set the attribute
                  internalnode1.setAttribute('url',newTexture);
                  }
                  else {
                    console.log(`${internalnodeid1} not found.`);
                  }    
                }
          /////////////change of gallery exhibition model////////////
      
          
          
            function showModel(modelUrl) {
                // Select the model container and existing scene
                const modelContainer = document.getElementById('model-container');
               
                while (modelContainer.firstChild)
                {modelContainer.removeChild(modelContainer.firstChild);}
                // Create a new X3D element
                const x3dElement = document.createElement('X3D');
                x3dElement.setAttribute('width','500px');
                // Create a new scene
                const newScene = document.createElement('scene');
                newScene.setAttribute('id', 'x3d-scene');
    
                
                // Create a new inline element with the new model URL
                const newInline = document.createElement('inline');
                newInline.setAttribute('nameSpaceName','model');
                newInline.setAttribute('id', 'x3d-model');
                newInline.setAttribute('url', modelUrl);

                // Append the new inline element to the new scene
                newScene.appendChild(newInline);

                // Append the new scene to the X3D element
                x3dElement.appendChild(newScene);

                // Append the new X3D element to the model container
                modelContainer.appendChild(x3dElement);

                x3dom.reload()

            };
          
            function changegallerytextures1()
            {
            document.getElementById("texture-container").innerHTML=
            `
            <div class="texture-item">
                          <img src="assets/images/coca_cola.jpg"  class = "texture-button" onclick="changeTexturecan('canwrap/COKE.jpeg', 'can_texture_id_node')" alt="texture 1">
                      </div>
                      <div class="texture-item">
                          <img src="assets/images/fanta.jpeg" class = "texture-button" onclick="changeTexturecan('canwrap/Fanta.jpg', 'can_texture_id_node')" alt="texture 1">
                      </div>
                      <div class="texture-item">
                        <img src="assets/images/sprite.jpg" class = "texture-button" onclick="changeTexturecan('canwrap/sprite.jpg', 'can_texture_id_node')" alt="texture 1">
                    </div>
                    <div class="texture-item">
                      <img src="assets/images/dr_pepper.jpg" class = "texture-button" onclick="changeTexturecan('canwrap/DRPEPPER.jpg', 'can_texture_id_node')" alt="texture 1">
            `
            }
            function changegallerytextures2()
            {
            document.getElementById("texture-container").innerHTML=
            `
            <div class="texture-item">
                          <img src="assets/images/coca_cola.jpg"  class = "texture-button" onclick="changeTexturecan('caps/coca_cola_cap.jpg', 'cap_texture_id_node')" alt="texture 1">
                      </div>
                      <div class="texture-item">
                          <img src="assets/images/fanta.jpeg" class = "texture-button" onclick="changeTexturecan('caps/fanta_cap.jpg', 'cap_texture_id_node')" alt="texture 1">
                      </div>
                      <div class="texture-item">
                        <img src="assets/images/sprite.jpg" class = "texture-button" onclick="changeTexturecan('caps/7up_cap.jpg', 'cap_texture_id_node')" alt="texture 1">
                    </div>
                    <div class="texture-item">
                      <img src="assets/images/dr_pepper.jpg" class = "texture-button" onclick="changeTexturecan('caps/dr_pepper_cap.jpg', 'cap_texture_id_node')" alt="texture 1">
            `
            }
            function changegallerytextures3()
            {
            document.getElementById("texture-container").innerHTML=
            `
            <div class="texture-item">
                          <img src="assets/images/coca_cola.jpg"  class = "texture-button" onclick="changeTexturecan('labelwrap/cokelabel.jpg', 'label_texture_id_node');changeTexturecan('labelwrap/cokelabel.jpg', 'bottlecap_texture_id_node')" alt="texture 1">
                      </div>
                      <div class="texture-item">
                        <img src="assets/images/fanta.jpeg"  class = "texture-button" onclick="changeTexturecan('labelwrap/fantalabel.jpg', 'label_texture_id_node');changeTexturecan('labelwrap/fantalabel.jpg', 'bottlecap_texture_id_node')" alt="texture 1">
                      </div>
                      <div class="texture-item">
                        <img src="assets/images/sprite.jpg"  class = "texture-button" onclick="changeTexturecan('labelwrap/spritelabel.jpg', 'label_texture_id_node');changeTexturecan('labelwrap/spritelabel.jpg', 'bottlecap_texture_id_node')" alt="texture 1">
                    </div>
                    <div class="texture-item">
                      <img src="assets/images/dr_pepper.jpg"  class = "texture-button" onclick="changeTexturecan('labelwrap/drpepperlabel.jpg', 'label_texture_id_node');changeTexturecan('labelwrap/drpepperlabel.jpg', 'bottlecap_texture_id_node')" alt="texture 1">
            `
            }
          
            window.changegallerytextures1 = changegallerytextures1;
            window.changegallerytextures2 = changegallerytextures2;
            window.changegallerytextures3 = changegallerytextures3;
        </script>

          
    </body>


</html>